<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos Wings & Pizza</title>
    <style>
        :root {
            --primary: #ff6b00; /* Naranja para comida */
            --dark: #333;
            --light: #f4f4f4;
            --admin-color: #007bff;
        }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: var(--light); padding-bottom: 90px; }
        
        /* Encabezado */
        header { background-color: var(--dark); color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        h1 { margin: 0; font-size: 1.4rem; }
        
        /* Bot√≥n Modo Admin */
        .admin-toggle { font-size: 0.8rem; background: #555; border: none; color: white; padding: 5px 10px; border-radius: 5px; margin-top: 5px; cursor: pointer; }
        .admin-mode-active { background-color: var(--admin-color); }

        /* Categor√≠as */
        .categories { display: flex; overflow-x: auto; background: white; padding: 10px; gap: 10px; white-space: nowrap; -webkit-overflow-scrolling: touch; }
        .cat-btn { padding: 10px 20px; border: none; border-radius: 20px; background: #eee; cursor: pointer; font-weight: bold; color: #555; }
        .cat-btn.active { background-color: var(--primary); color: white; }

        /* Lista de Productos */
        .product-list { padding: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
        .card { background: white; border-radius: 12px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: flex; flex-direction: column; justify-content: space-between; }
        .card h3 { margin: 0 0 10px 0; font-size: 1rem; color: var(--dark); }
        
        .price-display { font-size: 1.2rem; font-weight: bold; color: var(--primary); margin-bottom: 10px; }
        
        /* Select de Salsas */
        .sauce-select { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem; background: white; }

        .add-btn { background-color: var(--primary); color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; }
        .add-btn:active { transform: scale(0.95); }

        /* Controles de Admin */
        .admin-controls { display: none; border-top: 1px dashed #ccc; padding-top: 10px; margin-top: 10px; }
        .input-price { width: 70px; padding: 5px; }
        .delete-btn { background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; float: right; }
        
        /* Formulario nuevo producto (Solo Admin) */
        #newProductForm { display: none; background: #e9ecef; padding: 20px; margin: 15px; border-radius: 10px; border: 2px solid var(--admin-color); }
        #newProductForm input, #newProductForm select { width: 100%; padding: 10px; margin-bottom: 10px; box-sizing: border-box; }

        /* Carrito Flotante */
        .cart-float { position: fixed; bottom: 20px; right: 20px; left: 20px; background-color: var(--dark); color: white; padding: 15px 25px; border-radius: 50px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 5px 15px rgba(0,0,0,0.3); cursor: pointer; z-index: 90; }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 200; }
        .modal-content { background: white; margin: 10% auto; width: 90%; max-width: 400px; padding: 25px; border-radius: 15px; position: relative; max-height: 80vh; overflow-y: auto; }
        .cart-item { border-bottom: 1px solid #eee; padding: 10px 0; font-size: 0.95rem; }
        .item-details { color: #666; font-size: 0.85rem; font-style: italic; }
        .whatsapp-btn { background-color: #25D366; color: white; text-decoration: none; display: block; text-align: center; padding: 15px; border-radius: 10px; margin-top: 20px; font-weight: bold; font-size: 1.1rem; }
    </style>
</head>
<body>

    <header>
        <h1>üçó Pedidos Express</h1>
        <button class="admin-toggle" onclick="toggleAdminMode()">üîß Modo Due√±o</button>
    </header>

    <div class="categories">
        <button class="cat-btn active" onclick="filterProducts('COMBOS DE ALITAS')">ALITAS</button>
        <button class="cat-btn" onclick="filterProducts('PIZZAS')">PIZZAS</button>
        <button class="cat-btn" onclick="filterProducts('BEBIDAS')">BEBIDAS</button>
        <button class="cat-btn" onclick="filterProducts('ADICIONES')">ADICIONES</button>
    </div>

    <div id="newProductForm">
        <h3>‚ûï Agregar Nuevo Producto</h3>
        <input type="text" id="newProdName" placeholder="Nombre (ej: Pizza Hawaiana)">
        <input type="number" id="newProdPrice" placeholder="Precio (ej: 25000)">
        <select id="newProdCat">
            <option value="COMBOS DE ALITAS">COMBOS DE ALITAS</option>
            <option value="PIZZAS">PIZZAS</option>
            <option value="BEBIDAS">BEBIDAS</option>
            <option value="ADICIONES">ADICIONES</option>
        </select>
        <button class="add-btn" style="background-color: var(--admin-color);" onclick="addNewProduct()">Guardar Producto</button>
    </div>

    <div class="product-list" id="productsContainer"></div>

    <div class="cart-float" onclick="toggleCart()">
        <span style="font-weight: bold;">Ver Carrito (<span id="cartCount">0</span>)</span>
        <span id="cartTotal" style="font-size: 1.1rem;">$0</span>
    </div>

    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span style="float:right; font-size: 1.5rem; cursor:pointer;" onclick="toggleCart()">&times;</span>
            <h2 style="margin-top:0;">Tu Pedido</h2>
            <div id="cartItemsContainer"></div>
            <hr>
            <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:1.2rem;">
                <span>Total:</span>
                <span id="modalTotal">$0</span>
            </div>
            <a href="#" id="whatsappLink" class="whatsapp-btn" target="_blank">Enviar a WhatsApp üì≤</a>
        </div>
    </div>

    <script>
        // CONFIGURACI√ìN: CAMBIA TU N√öMERO AQU√ç
        const MY_PHONE = "573000000000"; 

        // Salsas disponibles
        const SAUCES = ["BBQ", "BBQ PICANTE", "MIEL MOSTAZA", "MARACUYA", "MORA"];

        // Productos Iniciales (Uno por categor√≠a como pediste)
        const defaultProducts = [
            { id: 1, name: "Combo 6 Alas + Papas", price: 18000, category: "COMBOS DE ALITAS" },
            { id: 2, name: "Pizza Peperoni", price: 25000, category: "PIZZAS" },
            { id: 3, name: "Gaseosa 1.5L", price: 6000, category: "BEBIDAS" },
            { id: 4, name: "Porci√≥n Papas", price: 5000, category: "ADICIONES" }
        ];

        // Cargar productos de memoria o usar default
        let products = JSON.parse(localStorage.getItem('myAppProducts')) || defaultProducts;
        let cart = [];
        let isAdmin = false;

        // Renderizar (Mostrar) productos
        function renderProducts(filter = 'COMBOS DE ALITAS') {
            const container = document.getElementById('productsContainer');
            container.innerHTML = '';

            // Filtrar productos
            const filtered = products.filter(p => p.category === filter);

            filtered.forEach(p => {
                // Crear HTML de opciones de salsa si es Alitas
                let sauceHTML = '';
                if (p.category === 'COMBOS DE ALITAS') {
                    sauceHTML = `
                        <select id="sauce-${p.id}" class="sauce-select">
                            <option value="" disabled selected>Elige tu salsa...</option>
                            ${SAUCES.map(s => `<option value="${s}">${s}</option>`).join('')}
                        </select>
                    `;
                }

                // Crear tarjeta
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div>
                        <h3>${p.name}</h3>
                        <div class="price-display">$${p.price.toLocaleString()}</div>
                        ${sauceHTML}
                    </div>
                    <div>
                        <button class="add-btn" onclick="addToCart(${p.id})">AGREGAR +</button>
                        
                        <div class="admin-controls" style="display: ${isAdmin ? 'block' : 'none'}">
                            <input type="number" value="${p.price}" onchange="updatePrice(${p.id}, this.value)" class="input-price">
                            <button class="delete-btn" onclick="deleteProduct(${p.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });

            // Actualizar botones de categor√≠a
            document.querySelectorAll('.cat-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.innerText === filter) btn.classList.add('active');
            });
        }

        // Funci√≥n para agregar al carrito
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            let selectedSauce = null;

            // Verificar si requiere salsa
            if (product.category === 'COMBOS DE ALITAS') {
                const sauceSelect = document.getElementById(`sauce-${id}`);
                if (sauceSelect.value === "") {
                    alert("‚ö†Ô∏è Por favor elige una salsa para las alitas.");
                    return;
                }
                selectedSauce = sauceSelect.value;
            }

            cart.push({ ...product, sauce: selectedSauce });
            updateCartUI();
            
            // Feedback visual peque√±o
            alert("‚úÖ Agregado: " + product.name);
        }

        // Actualizar Carrito y Totales
        function updateCartUI() {
            document.getElementById('cartCount').innerText = cart.length;
            const total = cart.reduce((sum, item) => sum + parseInt(item.price), 0);
            document.getElementById('cartTotal').innerText = "$" + total.toLocaleString();
            document.getElementById('modalTotal').innerText = "$" + total.toLocaleString();

            const container = document.getElementById('cartItemsContainer');
            if(cart.length === 0) {
                container.innerHTML = "<p>Tu carrito est√° vac√≠o üò¢</p>";
            } else {
                container.innerHTML = cart.map((item, index) => `
                    <div class="cart-item">
                        <div style="display:flex; justify-content:space-between;">
                            <strong>${item.name}</strong>
                            <span>$${parseInt(item.price).toLocaleString()}</span>
                        </div>
                        ${item.sauce ? `<div class="item-details">Salsa: ${item.sauce}</div>` : ''}
                        <div style="text-align:right; margin-top:5px;">
                            <span style="color:red; cursor:pointer; font-size:0.8rem;" onclick="removeFromCart(${index})">Eliminar</span>
                        </div>
                    </div>
                `).join('');
            }
            updateWhatsAppLink(total);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function toggleCart() {
            const modal = document.getElementById('cartModal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
        }

        function filterProducts(category) {
            // Guardamos la categor√≠a actual en una variable global o atributo para saber qu√© renderizar al editar
            window.currentCategory = category;
            renderProducts(category);
        }

        // Generar enlace de WhatsApp
        function updateWhatsAppLink(total) {
            let msg = "Hola! üôã‚Äç‚ôÇÔ∏è Quiero pedir:%0A%0A";
            cart.forEach(item => {
                msg += `‚ñ™Ô∏è ${item.name} ($${parseInt(item.price).toLocaleString()})`;
                if(item.sauce) msg += ` - Salsa: ${item.sauce}`;
                msg += `%0A`;
            });
            msg += `%0Aüí∞ *TOTAL: $${total.toLocaleString()}*`;
            document.getElementById('whatsappLink').href = `https://wa.me/${MY_PHONE}?text=${msg}`;
        }

        // --- FUNCIONES DE ADMINISTRADOR ---

        function toggleAdminMode() {
            isAdmin = !isAdmin;
            const btn = document.querySelector('.admin-toggle');
            const form = document.getElementById('newProductForm');
            
            if(isAdmin) {
                btn.classList.add('admin-mode-active');
                btn.innerText = "‚úÖ Modo Guardar";
                form.style.display = "block";
                alert("Modo Due√±o Activado: Ahora puedes cambiar precios, borrar productos o agregar nuevos abajo.");
            } else {
                btn.classList.remove('admin-mode-active');
                btn.innerText = "üîß Modo Due√±o";
                form.style.display = "none";
            }
            renderProducts(window.currentCategory || 'COMBOS DE ALITAS');
        }

        function updatePrice(id, newPrice) {
            const product = products.find(p => p.id === id);
            if(product) {
                product.price = parseInt(newPrice);
                saveData(); // Guardar cambios
            }
        }

        function deleteProduct(id) {
            if(confirm("¬øSeguro que quieres eliminar este producto?")) {
                products = products.filter(p => p.id !== id);
                saveData();
                renderProducts(window.currentCategory);
            }
        }

        function addNewProduct() {
            const name = document.getElementById('newProdName').value;
            const price = document.getElementById('newProdPrice').value;
            const cat = document.getElementById('newProdCat').value;

            if(!name || !price) {
                alert("Llena el nombre y el precio");
                return;
            }

            const newId = Date.now(); // Generar ID √∫nico basado en la hora
            products.push({ id: newId, name: name, price: parseInt(price), category: cat });
            saveData();
            
            // Limpiar form
            document.getElementById('newProdName').value = '';
            document.getElementById('newProdPrice').value = '';
            alert("Producto Agregado!");
            filterProducts(cat); // Ir a la categor√≠a del nuevo producto
        }

        function saveData() {
            localStorage.setItem('myAppProducts', JSON.stringify(products));
        }

        // Inicializar
        window.currentCategory = 'COMBOS DE ALITAS';
        renderProducts();
    </script>
</body>
</html>
